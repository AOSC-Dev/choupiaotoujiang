<html>
  <form>
    <label for="fileUpload">Upload file</label>
    <input type="file" id="fileUpload" accept="image/*" />
  </form>
  <div style="margin: 0 auto">
    <div>
      <img id="photo" width="75%" height="75%" />
    </div>
    <div>
      <a id="result" style="font-size: 70px"></a>
    </div>
  </div>
  <script async>
    const fileInput = document.getElementById("fileUpload");
    fileInput.addEventListener("change", async (event) => {
      console.log(event);
      const file = event.target.files[0];
      console.log(file);
      if (file) {
        const formData = new FormData();
        formData.append("file", file);
        const photo = document.getElementById("photo");
        photo.src = URL.createObjectURL(file);
        const resp = await fetch("http://127.0.0.1:3233/upload", {
          method: "POST",
          body: formData,
          "Content-Type": "multipart/form-data",
        });

        const json = await resp.json();

        document.getElementById("result").innerHTML = json;
      }
    });
  </script>
</html>
